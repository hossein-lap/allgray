{{ define "title" -}}
   {{ .Title | title }}
{{- end }}

{{ define "main" -}}
   {{ .Content }}

   {{ if .IsHome }}

      {{- if .Data.Pages -}}
      <div class="tableofcontents">
            <details>
               <summary> <h1> Posts </h1> </summary>
               <div class="sitemap">
         <ol>
         {{- range .Data.Pages -}}
            <details>
               <summary>
               <a href="{{ .RelPermalink }}">{{ .Title }}</a>
               </summary>
               {{- range .Pages }}
               <ul>
                  <li>
                     {{- if .Param "datesinlist" }}
                        <code>
                           <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
                              {{ .Date.Format "2006 Jan 02" }}
                           </time> &mdash;
                        </code>
                     {{ end -}}

                     <a href="{{ .RelPermalink }}">{{ .Title }}</a>

                     {{- if .Param "authorsinlist" }}
                        {{ with .Params.authors }}
                           &nbsp;
                              « {{ delimit . ", " " and " }} »
                        {{end}}
                     {{ end -}}

                     {{ if .Params.summary }}
                        <ul>
                           <details>
                              <summary>
                                 <div class="serif">
                                    <strong> Summary </strong>
                                 </div>
                              </summary>
                              <div class="collapse">
                                 {{ .Params.summary }}
                              </div>
                           </details>
                        </ul>
                     {{ end }}
                  </li>
               </ul>
               {{- end }}
            </details>
         {{- end -}}
         </ol>

               </div>
            </details>
      </div>
      {{- end -}}

   {{ else }}

      <ul>
         {{- range.Pages }}
         <li>
            {{- if .Param "datesinlist" }}
               <code>
                  <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
                     {{ .Date.Format "2006 Jan 02" }}
                  </time> &mdash;
               </code>
            {{ end -}}

            <a href="{{ .RelPermalink }}">{{ .Title }}</a>

            {{- if .Param "authorsinlist" }}
               {{ with .Params.authors }}
                  &nbsp;
                     « {{ delimit . ", " " and " }} »
               {{end}}
            {{ end -}}

            {{ if .Params.summary }}
               <ul>
                  <details>
                     <summary>
                        <div class="serif">
                           <strong> Summary </strong>
                        </div>
                     </summary>
                     <div class="collapse">
                        {{ .Params.summary }}
                     </div>
                  </details>
               </ul>
            {{ end }}
         </li>
         {{- end }}
      </ul>
   {{ end }}
{{- end }}
